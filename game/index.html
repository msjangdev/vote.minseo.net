<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>장민서 부회장 키우기</title>
    <!-- 모바일 화면 최적화를 위한 뷰포트 메타 태그 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap CSS 추가 -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <style>
        @font-face {
        font-family: 'Tenada';
        src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2210-2@1.0/Tenada.woff2') format('woff2');
        font-weight: normal;
        font-style: normal;
        }
        body {
            font-family: 'Tenada';
            text-align: center;
            background: #e45e81;
            overflow: hidden; /* 모바일에서 스크롤 방지 */
            margin: 0; /* 기본 여백 제거 */
        }
        #startScreen {
            margin-top: 50px;
        }
        /* 컨테이너를 전체 너비로 */
        .container {
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            padding: 0;
        }
        /* 제목과 텍스트 조정 */
        h1, p {
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="mt-4" style="color: white;">장민서 부회장 키우기</h1>
        <p style="margin-top: 0px;">공약을 먹으면 점수 +1, 뇌물을 받으면 생명 -1!</p>

        <!-- 시작 화면 -->
        <div id="startScreen" style="margin-top: 30px;">
            <h2>상위 랭킹</h2>
            <ol id="highScoresList"></ol>
            <button id="startButton" class="btn btn-success">게임 시작</button>
        </div>
    </div>

    <!-- Firebase SDK 추가 -->
    <!-- Firebase App (기본 SDK) -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <!-- Firebase Realtime Database -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <!-- Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
    <!-- Popper.js는 Bootstrap 모달에 필요합니다 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <!-- Bootstrap JS -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <!-- 랭킹 표시 스크립트 -->
    <script>
        // Firebase 설정 정보 (Firebase 콘솔에서 복사한 내용)
        var firebaseConfig = {
            apiKey: "AIzaSyAc516mkGvzpvloI6Rlq4Y_Zjd3PZNjMUg",
            authDomain: "minseo-vote-game.firebaseapp.com",
            databaseURL: "https://minseo-vote-game-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "minseo-vote-game",
            storageBucket: "minseo-vote-game.firebasestorage.app",
            messagingSenderId: "459457189180",
            appId: "1:459457189180:web:f921d96074df13156e7a39",
            measurementId: "G-YFMH3NYFR8"
        };
        // Firebase 초기화
        firebase.initializeApp(firebaseConfig);
        var database = firebase.database();

        // 상위 랭킹 표시 (Firebase 사용)
        function displayHighScores() {
            const highScoresList = document.getElementById("highScoresList");
            const scoresRef = database.ref('scores');
            scoresRef.orderByChild('score').limitToLast(5).once('value', snapshot => {
                const scores = [];
                snapshot.forEach(childSnapshot => {
                    scores.push(childSnapshot.val());
                });
                // 점수 내림차순으로 정렬
                scores.sort((a, b) => b.score - a.score);
                highScoresList.innerHTML = scores
                    .map(score => `<li>${score.name} - ${score.score}점</li>`)
                    .join('');
            });
        }

        displayHighScores();

        // 게임 시작 버튼 이벤트
        document.getElementById("startButton").addEventListener("click", () => {
            window.open('game.html', '_blank', 'width=600,height=800');
        });
    </script>
</body>
</html>
